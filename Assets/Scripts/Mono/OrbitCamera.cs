using UnityEngine;‚Ä®using UnityEngine.InputSystem;‚Ä®‚Ä®/// <summary>‚Ä®/// –û—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è –∫–∞–º–µ—Ä–∞: –≤—Ä–∞—â–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ —Ü–µ–Ω—Ç—Ä–∞ (A/D), –∑—É–º (–∫–æ–ª–µ—Å–∏–∫–æ)‚Ä®/// –†–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤—ã–º Input System‚Ä®/// </summary>‚Ä®public class OrbitCamera : MonoBehaviour‚Ä®{‚Ä®    [Header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ä–±–∏—Ç—ã")]‚Ä®    public Vector3 Target = Vector3.zero;‚Ä®    public float Distance = 20f;‚Ä®    public float Height = 15f;‚Ä®    public float Angle = 45f;‚Ä®‚Ä®    [Header("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ")]‚Ä®    public float RotationSpeed = 50f;‚Ä®    public float ZoomSpeed = 5f;‚Ä®    public float MinDistance = 5f;‚Ä®    public float MaxDistance = 50f;‚Ä®    public float MoveSpeed = 10f;‚Ä®‚Ä®    [Header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã")]‚Ä®    [Tooltip("–£–≤–µ–ª–∏—á–∏—Ç—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ–π —Å–µ—Ç–∫–∏ –ø—Ä–∏ –≤–∏–¥–µ —Å–≤–µ—Ä—Ö—É")]‚Ä®    public float FarClipPlane = 1000f;‚Ä®    [Tooltip("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –ø—Ä–æ–µ–∫—Ü–∏—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –≤–∏–¥–∞ —Å–≤–µ—Ä—Ö—É)")]‚Ä®    public bool UseOrthographic = false;‚Ä®    [Tooltip("–†–∞–∑–º–µ—Ä –æ—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –∫–∞–º–µ—Ä—ã")]‚Ä®    public float OrthographicSize = 35f;‚Ä®‚Ä®    private float currentRotation = 0f;‚Ä®‚Ä®    // Input System references‚Ä®    private Keyboard keyboard;‚Ä®    private Mouse mouse;‚Ä®‚Ä®    void Start()‚Ä®    {‚Ä®        currentRotation = -45f;‚Ä®‚Ä®        // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤–≤–æ–¥–∞‚Ä®        keyboard = Keyboard.current;‚Ä®        mouse = Mouse.current;‚Ä®        ‚Ä®        // üî• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ–π —Å–µ—Ç–∫–∏‚Ä®        Camera cam = GetComponent<Camera>();‚Ä®        if (cam != null)‚Ä®        {‚Ä®            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫–∏‚Ä®            cam.farClipPlane = FarClipPlane;‚Ä®            ‚Ä®            // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ –æ—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –ø—Ä–æ–µ–∫—Ü–∏—é‚Ä®            if (UseOrthographic)‚Ä®            {‚Ä®                cam.orthographic = true;‚Ä®                cam.orthographicSize = OrthographicSize;‚Ä®            }‚Ä®            ‚Ä®            Debug.Log($"[OrbitCamera] Camera setup: farClip={cam.farClipPlane}, orthographic={cam.orthographic}");‚Ä®        }‚Ä®‚Ä®        UpdateCameraPosition();‚Ä®    }‚Ä®‚Ä®    void Update()‚Ä®    {‚Ä®        HandleRotation();‚Ä®        HandleZoom();‚Ä®        UpdateCameraPosition();‚Ä®        HandleMovement();‚Ä®        ‚Ä®    }‚Ä®‚Ä®    void HandleRotation()‚Ä®    {‚Ä®        if (keyboard == null) return;‚Ä®‚Ä®        float horizontal = 0f;‚Ä®‚Ä®        // A - –≤–ª–µ–≤–æ, D - –≤–ø—Ä–∞–≤–æ‚Ä®        if (keyboard.qKey.isPressed)‚Ä®            horizontal = -1f;‚Ä®        if (keyboard.eKey.isPressed)‚Ä®            horizontal = 1f;‚Ä®‚Ä®        currentRotation += horizontal * RotationSpeed * Time.deltaTime;‚Ä®    }‚Ä®    void HandleMovement()‚Ä®    {‚Ä®        if (keyboard == null) return;‚Ä®‚Ä®        Vector3 move = Vector3.zero;‚Ä®‚Ä®        if (keyboard.wKey.isPressed) move.z += 1f;‚Ä®        if (keyboard.sKey.isPressed) move.z -= 1f;‚Ä®        if (keyboard.aKey.isPressed) move.x -= 1f;‚Ä®        if (keyboard.dKey.isPressed) move.x += 1f;‚Ä®‚Ä®        move = move.normalized * MoveSpeed * Time.deltaTime;‚Ä®‚Ä®        Target += move;‚Ä®    }‚Ä®    void HandleZoom()‚Ä®    {‚Ä®        if (mouse == null) return;‚Ä®‚Ä®        // –ö–æ–ª–µ—Å–∏–∫–æ –º—ã—à–∏‚Ä®        Vector2 scrollDelta = mouse.scroll.ReadValue();‚Ä®        float scroll = scrollDelta.y * 0.01f; // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º‚Ä®‚Ä®        Distance -= scroll * ZoomSpeed;‚Ä®        Distance = Mathf.Clamp(Distance, MinDistance, MaxDistance);‚Ä®    }‚Ä®‚Ä®    void UpdateCameraPosition()‚Ä®    {‚Ä®        /*‚Ä®        float radians = currentRotation * Mathf.Deg2Rad;‚Ä®        float angleRadians = Angle * Mathf.Deg2Rad;‚Ä®‚Ä®        Vector3 offset = new Vector3(‚Ä®            Mathf.Sin(radians) * Distance * Mathf.Cos(angleRadians),‚Ä®            Height,‚Ä®            Mathf.Cos(radians) * Distance * Mathf.Cos(angleRadians)‚Ä®        );‚Ä®‚Ä®        transform.position = Target + offset;‚Ä®        transform.LookAt(Target);‚Ä®        */‚Ä®        transform.position = new Vector3(Target.x, Height, Target.z);‚Ä®        transform.rotation = Quaternion.Euler(Angle, 0f, 0f); // —Å–º–æ—Ç—Ä–∏ —Å—Ç—Ä–æ–≥–æ –≤–Ω–∏–∑‚Ä®        ‚Ä®    }‚Ä®‚Ä®    void OnDrawGizmos()‚Ä®    {‚Ä®        Gizmos.color = Color.yellow;‚Ä®        Gizmos.DrawWireSphere(Target, 0.5f);‚Ä®        Gizmos.DrawLine(transform.position, Target);‚Ä®    }‚Ä®}‚Ä®